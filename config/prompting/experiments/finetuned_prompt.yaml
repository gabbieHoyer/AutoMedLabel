## Finetuned Prompting Experimentation Config

# -------------- Finetuned Prompting -------------- #
prompt_experiment:
  name: ${experiment.name}
  description: "Prompt Inference for Finetuned model weights; full image preprocessing."

input_cfg:
  image_path: DATASET.nifti_image_dir                 
  gt_path: DATASET.nifti_mask_dir                     
  path_ext: '.nii.gz'
  ml_metadata_file: DATASET.ml_metadata_file 
  split: 'test' 

preprocessing_cfg:
  image_size: DATASET.image_size
  voxel_num_thre2d: DATASET.voxel_num_thre2d
  voxel_num_thre3d: DATASET.voxel_num_thre3d
  remove_label_ids: DATASET.remove_label_ids
  target_label_id: DATASET.target_label_id
  crop_non_zero_slices_flag: False
  bbox_shift: 20
  infer_method: '3D_stepwise'

device: cuda:0

models:
  - model_path: ${finetuned_model.model_path}
    model_weights: ${finetuned_model.model_weights}
    model_type: ${finetuned_model.model_type}

# design: # mskscratch/mskSAM/(exp_name: SOTA_Comparison/miniKnee)/(weights_name: SAM/MedSAM/miniTBrecon)/(dataset_name: TBrecon)/(figs/bbox_figs/preds)
base_output_dir: DATASET.project_output_dir/${experiment.name}/${models.model_weights}/DATASET.name

# Dynamic functionality -> "DATASET.__"" indicates a field value to dynamically replace
# useful for multi-dataset prompting

# --- OUTPUT: Location to output (gt, prediction) .npz files
inference_dir: preds

output_configuration:
  save_path: work_dir/prompting/${prompt_experiment.name}/Prompt_Summaries
  logging_level: DEBUG 

# ------------------ VISUALIZE NPY ------------------ #
mask_labels: DATASET.mask_labels 

gt_pred_npz_fig_cfg:
  fig_type: ['2D_overlay', 'gif'] 
  num_figs: 5  
  slice_selection: 'with_segmentation' 
  fig_path: figs

bbox_prompt_npz_fig_cfg:
  fig_type: ['2D_overlay', 'gif']
  num_figs: 5  
  slice_selection: 'with_segmentation'
  fig_path: bbox_prompt_figs

# ----------------------- Metrics for Statistics --------------- #
metric_cfg:
  save_path: metrics
  metric_list: [dice, hausdorff, IoU, sensitivity_specificity]  
  compute_average: False #tbd

# ----------------------- Image Embeddings ----------------------- #
embedding_cfg:
  save_path: embeddings
  high_res: True 






